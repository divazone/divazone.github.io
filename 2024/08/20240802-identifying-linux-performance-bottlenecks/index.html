<!doctype html><html lang=zh-TW><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=robots content="noodp"><title>尋找當下 Linux OS 效能瓶頸 - Divazone's Space</title><meta name=Description content><meta property="og:title" content="尋找當下 Linux OS 效能瓶頸">
<meta property="og:description" content="常常聽到一些客戶反映他們的系統速度很慢，但通常無法明確指出慢在哪里。這裡提供一個簡單的方法，當遇到當下系統速度變慢的情況時，可以通過一些數字來判斷瓶頸點（Bound）。這篇文章僅從操作系統層面進行說明，不涉及應用程序層級的效能問題。
"><meta property="og:type" content="article"><meta property="og:url" content="https://blog.divaozne.tw/2024/08/20240802-identifying-linux-performance-bottlenecks/"><meta property="og:image" content="https://blog.divaozne.tw/logo.png"><meta property="article:section" content="posts"><meta property="article:published_time" content="2024-08-02T00:00:00+08:00"><meta property="article:modified_time" content="2024-08-02T00:00:00+08:00"><meta property="og:site_name" content="Divazone's Space"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://blog.divaozne.tw/logo.png"><meta name=twitter:title content="尋找當下 Linux OS 效能瓶頸"><meta name=twitter:description content="常常聽到一些客戶反映他們的系統速度很慢，但通常無法明確指出慢在哪里。這裡提供一個簡單的方法，當遇到當下系統速度變慢的情況時，可以通過一些數字來判斷瓶頸點（Bound）。這篇文章僅從操作系統層面進行說明，不涉及應用程序層級的效能問題。
"><meta name=application-name content="My cool site"><meta name=apple-mobile-web-app-title content="My cool site"><meta name=theme-color content="#ffffff"><meta name=msapplication-TileColor content="#da532c"><link rel="shortcut icon" type=image/x-icon href=/favicon.ico><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=mask-icon href=/safari-pinned-tab.svg color=#5bbad5><link rel=manifest href=/site.webmanifest><link rel=canonical href=https://blog.divaozne.tw/2024/08/20240802-identifying-linux-performance-bottlenecks/><link rel=prev href=https://blog.divaozne.tw/2024/07/20240731-suggestions_to_enhance_your_ansible_skills/><link rel=next href=https://blog.divaozne.tw/2024/09/20240904-how-to-improve-programming-skills/><link rel=stylesheet href=/css/style.min.css><link rel=preload href=https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.1.1/css/all.min.css as=style onload='this.onload=null,this.rel="stylesheet"'><noscript><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.1.1/css/all.min.css></noscript><link rel=preload href=https://cdn.jsdelivr.net/npm/animate.css@4.1.1/animate.min.css as=style onload='this.onload=null,this.rel="stylesheet"'><noscript><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/animate.css@4.1.1/animate.min.css></noscript><script type=application/ld+json>{"@context":"http://schema.org","@type":"BlogPosting","headline":"尋找當下 Linux OS 效能瓶頸","inLanguage":"zh-TW","mainEntityOfPage":{"@type":"WebPage","@id":"https:\/\/blog.divaozne.tw\/2024\/08\/20240802-identifying-linux-performance-bottlenecks\/"},"genre":"posts","keywords":"linux, performance","wordcount":1763,"url":"https:\/\/blog.divaozne.tw\/2024\/08\/20240802-identifying-linux-performance-bottlenecks\/","datePublished":"2024-08-02T00:00:00+08:00","dateModified":"2024-08-02T00:00:00+08:00","publisher":{"@type":"Organization","name":""},"author":{"@type":"Person","name":"Divazone King"},"description":""}</script></head><body data-header-desktop=fixed data-header-mobile=auto><script type=text/javascript>(window.localStorage&&localStorage.getItem("theme")?localStorage.getItem("theme")==="dark":"auto"==="auto"?window.matchMedia("(prefers-color-scheme: dark)").matches:"auto"==="dark")&&document.body.setAttribute("theme","dark")</script><div id=mask></div><div class=wrapper><header class=desktop id=header-desktop><div class=header-wrapper><div class=header-title><a href=/ title="Divazone's Space">Divazone's Space</a></div><div class=menu><div class=menu-inner><a class=menu-item href=/posts/>Posts </a><a class=menu-item href=/tags/>Tags </a><a class=menu-item href=/categories/>Categories </a><a class=menu-item href=/about/>About </a><a class=menu-item href=/donate/>Donate </a><span class="menu-item delimiter"></span><span class="menu-item search" id=search-desktop>
<input type=text placeholder=搜索文章標題或內容... id=search-input-desktop>
<a href=javascript:void(0); class="search-button search-toggle" id=search-toggle-desktop title=搜索><i class="fas fa-search fa-fw" aria-hidden=true></i>
</a><a href=javascript:void(0); class="search-button search-clear" id=search-clear-desktop title=清空><i class="fas fa-times-circle fa-fw" aria-hidden=true></i>
</a><span class="search-button search-loading" id=search-loading-desktop><i class="fas fa-spinner fa-fw fa-spin" aria-hidden=true></i>
</span></span><a href=javascript:void(0); class="menu-item theme-switch" title=切換主題><i class="fas fa-adjust fa-fw" aria-hidden=true></i></a></div></div></div></header><header class=mobile id=header-mobile><div class=header-container><div class=header-wrapper><div class=header-title><a href=/ title="Divazone's Space">Divazone's Space</a></div><div class=menu-toggle id=menu-toggle-mobile><span></span><span></span><span></span></div></div><div class=menu id=menu-mobile><div class=search-wrapper><div class="search mobile" id=search-mobile><input type=text placeholder=搜索文章標題或內容... id=search-input-mobile>
<a href=javascript:void(0); class="search-button search-toggle" id=search-toggle-mobile title=搜索><i class="fas fa-search fa-fw" aria-hidden=true></i>
</a><a href=javascript:void(0); class="search-button search-clear" id=search-clear-mobile title=清空><i class="fas fa-times-circle fa-fw" aria-hidden=true></i>
</a><span class="search-button search-loading" id=search-loading-mobile><i class="fas fa-spinner fa-fw fa-spin" aria-hidden=true></i></span></div><a href=javascript:void(0); class=search-cancel id=search-cancel-mobile>取消</a></div><a class=menu-item href=/posts/ title>Posts</a><a class=menu-item href=/tags/ title>Tags</a><a class=menu-item href=/categories/ title>Categories</a><a class=menu-item href=/about/ title>About</a><a class=menu-item href=/donate/ title>Donate</a><a href=javascript:void(0); class="menu-item theme-switch" title=切換主題>
<i class="fas fa-adjust fa-fw" aria-hidden=true></i></a></div></div></header><div class="search-dropdown desktop"><div id=search-dropdown-desktop></div></div><div class="search-dropdown mobile"><div id=search-dropdown-mobile></div></div><main class=main><div class=container><div class=toc id=toc-auto><h2 class=toc-title>目錄</h2><div class="toc-content always-active" id=toc-content-auto></div></div><article class="page single"><h1 class="single-title animate__animated animate__flipInX">尋找當下 Linux OS 效能瓶頸</h1><div class=post-meta><div class=post-meta-line><span class=post-author><a href=/ title=Author rel=author class=author><i class="fas fa-user-circle fa-fw" aria-hidden=true></i>Divazone King</a></span>&nbsp;<span class=post-category>收錄於 <a href=/categories/linux/><i class="far fa-folder fa-fw" aria-hidden=true></i>linux</a></span></div><div class=post-meta-line><i class="far fa-calendar-alt fa-fw" aria-hidden=true></i>&nbsp;<time datetime=2024-08-02>2024-08-02</time>&nbsp;<i class="fas fa-pencil-alt fa-fw" aria-hidden=true></i>&nbsp;約 1763 字&nbsp;
<i class="far fa-clock fa-fw" aria-hidden=true></i>&nbsp;預計閱讀 4 分鐘&nbsp;</div></div><div class="details toc" id=toc-static data-kept><div class="details-summary toc-title"><span>目錄</span>
<span><i class="details-icon fas fa-angle-right" aria-hidden=true></i></span></div><div class="details-content toc-content" id=toc-content-static><nav id=TableOfContents><ul><li><a href=#系統壓力觀測目標>系統壓力觀測目標</a></li><li><a href=#環境介紹>環境介紹</a></li><li><a href=#安裝>安裝</a></li><li><a href=#常常遇到的問題>常常遇到的問題</a><ul><li><a href=#懷疑系統是不是真的忙>懷疑系統是不是真的忙?</a></li><li><a href=#懷疑是-cpu-bound>懷疑是 CPU Bound?</a></li><li><a href=#懷疑是-network-bound>懷疑是 Network Bound?</a></li><li><a href=#懷疑是-memory>懷疑是 Memory?</a></li><li><a href=#懷疑是-swap-page-bound>懷疑是 Swap Page Bound?</a></li><li><a href=#懷疑是-disk-io-bound>懷疑是 Disk I/O Bound？</a></li></ul></li><li><a href=#結語>結語</a></li><li><a href=#references>References</a></li></ul></nav></div></div><div class=content id=content><p>常常聽到一些客戶反映他們的系統速度很慢，但通常無法明確指出慢在哪里。這裡提供一個簡單的方法，當遇到<code>當下</code>系統速度變慢的情況時，可以通過一些<code>數字</code>來判斷瓶頸點（Bound）。這篇文章僅從操作系統層面進行說明，不涉及應用程序層級的效能問題。</p><p><img class=lazyload src=/svg/loading.min.svg data-src=/2024/08/20240802-identifying-linux-performance-bottlenecks/linux_observability_sar.png data-srcset="/2024/08/20240802-identifying-linux-performance-bottlenecks/linux_observability_sar.png, /2024/08/20240802-identifying-linux-performance-bottlenecks/linux_observability_sar.png 1.5x, /2024/08/20240802-identifying-linux-performance-bottlenecks/linux_observability_sar.png 2x" data-sizes=auto alt=/2024/08/20240802-identifying-linux-performance-bottlenecks/linux_observability_sar.png title=linux_observability_sar width=1500 height=1050></p><h2 id=系統壓力觀測目標>系統壓力觀測目標</h2><blockquote><p>sar - Clliect, report, or save system activity information</p></blockquote><p>本文將使用 <code>sar</code> 系統活動報告器來貫穿所有操作，主要觀測點有以下五個：</p><ol><li>CPU</li><li>Disk I/O</li><li>Network</li><li>Memory</li><li>Swap</li></ol><p>選用 sar 的理由如下：</p><ol><li>數據收集過程對系統本身造成的壓力最小</li><li>大多數 Linux 發行版均可使用</li><li>指令簡單易用</li><li>是目前 Linux 上較為全面的系統效能分析工具之一</li></ol><h2 id=環境介紹>環境介紹</h2><ul><li>Archlinux</li></ul><h2 id=安裝>安裝</h2><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>sudo pacman -S sysstat
</span></span></code></pre></td></tr></table></div></div><h2 id=常常遇到的問題>常常遇到的問題</h2><blockquote><p>[聲明] 如果以下的欄位解釋覺得翻譯得不好，可以參考 <code>man sar</code> 的英文版解釋</p></blockquote><h3 id=懷疑系統是不是真的忙>懷疑系統是不是真的忙?</h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>sar -q <span class=m>1</span> <span class=m>60</span>
</span></span></code></pre></td></tr></table></div></div><ul><li>指令解釋: 每隔 1 秒收集一次，一共收集 60 次平均常見的負載 (1m / 5m / 15m)數字</li></ul><p><img class=lazyload src=/svg/loading.min.svg data-src=/2024/08/20240802-identifying-linux-performance-bottlenecks/sar-q.PNG data-srcset="/2024/08/20240802-identifying-linux-performance-bottlenecks/sar-q.PNG, /2024/08/20240802-identifying-linux-performance-bottlenecks/sar-q.PNG 1.5x, /2024/08/20240802-identifying-linux-performance-bottlenecks/sar-q.PNG 2x" data-sizes=auto alt=/2024/08/20240802-identifying-linux-performance-bottlenecks/sar-q.PNG title=sar-q width=950 height=688></p><ul><li><p>欄位解釋:</p><ul><li>runq-sz: 運行中的 Quene 長度 (等待運行的 Tasks 數)</li><li>plist-sz: Tasks 列表中的 tasks 數量</li><li>ldavg-1: 最後 1 分鐘的系統平均負載量</li><li>ldavg-5: 最後 5 分鐘的系統平均負載量</li><li>ldavg-15: 最後 15 分鐘的系統平均負載量</li></ul></li><li><p>數字解讀:</p><ul><li>現在都是支援多核 CPU，故 <code>n</code> 個 CPU Core，可接受的系統負荷最大 <code>n.0</code></li><li>確認系統核心數的指令是 <code>grep -c 'model name' /proc/cpuinfo</code></li><li>通常來講是看 <code>ldavg-15</code>，如果長期接近或大於 n 的話，就是系統負擔過大</li></ul></li></ul><h3 id=懷疑是-cpu-bound>懷疑是 CPU Bound?</h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>sar -u <span class=m>2</span> <span class=m>10</span> //看 CPU Overview 使用率 <span class=o>(</span>與 mpstat 相同<span class=o>)</span>
</span></span><span class=line><span class=cl>sar -P ALL <span class=m>2</span> <span class=m>10</span> //看個別 CPU 使用率 <span class=o>(</span>與 mpstat -P ALL 相同<span class=o>)</span>
</span></span></code></pre></td></tr></table></div></div><ul><li>指令解釋: 每隔 2 秒收集一次，一共收集 10 次所有 CPU 的效能數據</li></ul><p><img class=lazyload src=/svg/loading.min.svg data-src=/2024/08/20240802-identifying-linux-performance-bottlenecks/sar-u.PNG data-srcset="/2024/08/20240802-identifying-linux-performance-bottlenecks/sar-u.PNG, /2024/08/20240802-identifying-linux-performance-bottlenecks/sar-u.PNG 1.5x, /2024/08/20240802-identifying-linux-performance-bottlenecks/sar-u.PNG 2x" data-sizes=auto alt=/2024/08/20240802-identifying-linux-performance-bottlenecks/sar-u.PNG title=sar-u width=930 height=343></p><p><img class=lazyload src=/svg/loading.min.svg data-src=/2024/08/20240802-identifying-linux-performance-bottlenecks/sar-P.PNG data-srcset="/2024/08/20240802-identifying-linux-performance-bottlenecks/sar-P.PNG, /2024/08/20240802-identifying-linux-performance-bottlenecks/sar-P.PNG 1.5x, /2024/08/20240802-identifying-linux-performance-bottlenecks/sar-P.PNG 2x" data-sizes=auto alt=/2024/08/20240802-identifying-linux-performance-bottlenecks/sar-P.PNG title=sar-P width=922 height=150></p><ul><li><p>欄位解釋</p><ul><li>%user: 於 User (Application) 等級之下，消耗的 CPU 時間比例</li><li>%nice: 透過 <code>nice</code> 改變優先級，於 User (Application) 等級之下，消耗的 CPU 時間的比例</li><li>%system: 於 System (Kernel) 等級之下，消耗的 CPU 時間比例</li><li>%iowait: CPU 等待 Disk I/O 導致空閑狀態 (Idle) 消耗的時間比例</li><li>%steal: 利用虛擬化技術，等待其他 vCPU 計算佔用的時間比例</li><li>%idle: CPU 空閑時間比例</li></ul></li><li><p>數字解讀</p><ul><li><code>%iowait</code> 過高，有可能是 Disk I/O 瓶頸，要改善 Disk</li><li><code>%idle</code> 過高，有可能是 CPU 等待分配 Memory，要看一下記憶體是不是不夠</li><li><code>%idle</code> 持續低於 10，則代表 CPU 處理效率低，需要解決 CPU 瓶頸</li></ul></li></ul><h3 id=懷疑是-network-bound>懷疑是 Network Bound?</h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>sar -n DEV <span class=m>2</span> <span class=m>10</span>
</span></span></code></pre></td></tr></table></div></div><ul><li>指令解讀: 每隔 2 秒收集一次，一共收集 10 次所有網卡的效能數據</li></ul><p><img class=lazyload src=/svg/loading.min.svg data-src=/2024/08/20240802-identifying-linux-performance-bottlenecks/sar-n.PNG data-srcset="/2024/08/20240802-identifying-linux-performance-bottlenecks/sar-n.PNG, /2024/08/20240802-identifying-linux-performance-bottlenecks/sar-n.PNG 1.5x, /2024/08/20240802-identifying-linux-performance-bottlenecks/sar-n.PNG 2x" data-sizes=auto alt=/2024/08/20240802-identifying-linux-performance-bottlenecks/sar-n.PNG title=sar-n width=1161 height=158></p><ul><li><p>欄位解釋:</p><ul><li>rxpck/s: 每秒接收到的封包量</li><li>txpck/s: 每秒傳送出的封包量</li><li>rxkB/s: 每秒接收到的 bytes 數量</li><li>txkB/s: 每秒傳送出的 bytes 數量</li><li>rxcmp/s: 每秒接收到的壓縮後封包</li><li>txcmp/s: 每秒傳送出的壓縮後封包</li><li>rxmcst/s: 每秒接收到的群播封包</li><li>%ifutil: 網路介面使用率</li></ul></li><li><p>數字解讀:</p><ul><li><code>rxpck/s</code> 和 <code>txpck/s</code> 是衡量一張網卡效能的指標，數字越大壓力越大</li><li><code>rxkB/s</code> 和 <code>txkB/s</code> 是代表吞吐量效能，數字越大壓力越大</li></ul></li></ul><h3 id=懷疑是-memory>懷疑是 Memory?</h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>sar -r <span class=m>2</span> <span class=m>10</span>
</span></span></code></pre></td></tr></table></div></div><ul><li>指令解釋: 每隔 2 秒收集一次，一共收集 10 次記憶體的效能數據</li></ul><p><img class=lazyload src=/svg/loading.min.svg data-src=/2024/08/20240802-identifying-linux-performance-bottlenecks/sar-r.PNG data-srcset="/2024/08/20240802-identifying-linux-performance-bottlenecks/sar-r.PNG, /2024/08/20240802-identifying-linux-performance-bottlenecks/sar-r.PNG 1.5x, /2024/08/20240802-identifying-linux-performance-bottlenecks/sar-r.PNG 2x" data-sizes=auto alt=/2024/08/20240802-identifying-linux-performance-bottlenecks/sar-r.PNG title=sar-r width=1390 height=348></p><ul><li><p>欄位解釋</p><ul><li>kbmemfree: 閒置的 Free Memory 大小</li><li>kbavail: 無需透過 Swapping 即可使用的 Memory 大小</li><li>kbmemused: 使用中的 Memory</li><li>%memused: 物理記憶體使用率</li><li>kbbuffers: Kernel 拿去作為 Buffer 的大小</li><li>kbcached: Kernel 拿取當作 Cached 的大小</li><li>kbcommit: Kernel 當前工作負載所需要的量，這是預估需要多少 RAM/Swap，以保證不會有記憶體不足的估計值</li><li>%commit: Kernel 當前工作負載所需記憶體佔記憶體總量 (RAM + Swap) 的百分比</li><li>kbactive: 活躍中的記憶體，除非必要，通常不會回收 (Reclaimed)</li><li>kbinact: 不活躍中的記憶體，最近被使用的次數較少，有可能會被回收</li><li>kbdirty: 等待寫回至磁碟的記憶體內容</li></ul></li><li><p>數字解讀</p><ul><li>透過 <code>%memused</code> <code>kbbuffers</code> <code>kbcached</code> 可以了解到記憶體實際使用量</li><li><code>%commit</code> 這是 <code>kbcommit</code> 與記憶體總量 (包含swap) 的百分比數字，越小代表記憶體越足夠</li><li><code>%commit</code> 有可能會大於 100%，有可能 Kernel 使用過量記憶體</li></ul></li></ul><h3 id=懷疑是-swap-page-bound>懷疑是 Swap Page Bound?</h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>sar -W <span class=m>2</span> <span class=m>10</span>
</span></span></code></pre></td></tr></table></div></div><ul><li>指令解讀: 每隔 2 秒收集一次，一共收集 10 次 Swap page out/in 的效能數據</li></ul><p><img class=lazyload src=/svg/loading.min.svg data-src=/2024/08/20240802-identifying-linux-performance-bottlenecks/sar-W.PNG data-srcset="/2024/08/20240802-identifying-linux-performance-bottlenecks/sar-W.PNG, /2024/08/20240802-identifying-linux-performance-bottlenecks/sar-W.PNG 1.5x, /2024/08/20240802-identifying-linux-performance-bottlenecks/sar-W.PNG 2x" data-sizes=auto alt=/2024/08/20240802-identifying-linux-performance-bottlenecks/sar-W.PNG title=sar-r width=916 height=343></p><ul><li><p>欄位解釋</p><ul><li>pswpin/s: 每秒系統 Swap page IN 的數量</li><li>pswpout/s: 每秒系統 Swap page Out 的數量</li></ul></li><li><p>數字解讀</p><ul><li>這個只要有數字跳出來，伺服器處理吞吐量會大幅下降，這時候要先確定是不是記憶體夠不夠</li></ul></li></ul><h3 id=懷疑是-disk-io-bound>懷疑是 Disk I/O Bound？</h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>sar -d <span class=m>2</span> <span class=m>10</span>
</span></span></code></pre></td></tr></table></div></div><ul><li>指令解讀: 每隔 2 秒收集一次，一共收集 10 次 Disk I/O 的效能數據</li></ul><p><img class=lazyload src=/svg/loading.min.svg data-src=/2024/08/20240802-identifying-linux-performance-bottlenecks/sar-d.PNG data-srcset="/2024/08/20240802-identifying-linux-performance-bottlenecks/sar-d.PNG, /2024/08/20240802-identifying-linux-performance-bottlenecks/sar-d.PNG 1.5x, /2024/08/20240802-identifying-linux-performance-bottlenecks/sar-d.PNG 2x" data-sizes=auto alt=/2024/08/20240802-identifying-linux-performance-bottlenecks/sar-d.PNG title=sar-d width=1171 height=152></p><ul><li><p>欄位解釋</p><ul><li>tps: 設備每秒數據傳輸量</li><li>rkB/s: 每秒從設備讀取的資料量</li><li>wkB/s: 每秒寫入到設備的資料量</li><li>dkB/s: 每秒被設備丟棄的資料量</li><li>areq-sz: 發出到設備 I/O 請求的平均資料大小</li><li>aqu-sz: 發出到設備的 I/O 請求的平均 Queue 長度</li><li>await: 發出到服務的設備請求 I/O 的平均反應時間</li><li>%util: 向設備發出 I/O 請求的經過時間百分比</li></ul></li><li><p>數字解讀</p><ul><li><code>%util</code> 數值越大越忙</li><li>如果剛好有 raid 之類的話，<code>%util</code> 有可能會大於 100%</li><li><code>iostat</code> 比較詳細，針對 Disk I/O 更建議使用</li></ul></li></ul><h2 id=結語>結語</h2><p>當然，<code>sar</code> 並不是長期監控的最佳方案，更推薦使用 <code>Performance Co-Pilot (PCP)</code> <a href=https://pcp.io/ target=_blank rel="noopener noreffer">PCP 快速入門</a> 來進行系統的長期監控與維護。</p><p>通過此篇文章，希望大家在遇到系統變慢的情況時，可以先利用 <code>sar</code> 進行快速的初步了解，建立一個基本的認識，然後再花時間規劃更長期的系統監控方式。</p><h2 id=references>References</h2><ul><li><a href=https://linuxtools-rst.readthedocs.io/zh_CN/latest/tool/sar.html target=_blank rel="noopener noreffer">sar 找出系统瓶颈的利器</a></li><li><a href=https://www.ruanyifeng.com/blog/2011/07/linux_load_average_explained.html target=_blank rel="noopener noreffer">理解Linux系统负荷</a></li><li><a href=https://pcp.io/ target=_blank rel="noopener noreffer">Performance Co-Pilot</a></li><li><a href=https://www.linuxatemyram.com/ target=_blank rel="noopener noreffer">Linux ate My RAM</a></li><li><a href=https://blog.gtwang.org/linux/linux-cache-memory-linux/ target=_blank rel="noopener noreffer">Linux 的記憶體快取（Cache Memory）功能：Linux 系統把記憶體用光了？</a></li></ul></div><div class=post-footer id=post-footer><div class=post-info><div class=post-info-line><div class=post-info-mod><span>更新於 2024-08-02</span></div></div><div class=post-info-line><div class=post-info-md></div><div class=post-info-share><span><a href=javascript:void(0); title="分享到 Twitter" data-sharer=twitter data-url=https://blog.divaozne.tw/2024/08/20240802-identifying-linux-performance-bottlenecks/ data-title="尋找當下 Linux OS 效能瓶頸" data-hashtags=linux,performance><i class="fab fa-twitter fa-fw" aria-hidden=true></i></a><a href=javascript:void(0); title="分享到 Facebook" data-sharer=facebook data-url=https://blog.divaozne.tw/2024/08/20240802-identifying-linux-performance-bottlenecks/ data-hashtag=linux><i class="fab fa-facebook-square fa-fw" aria-hidden=true></i></a></span></div></div></div><div class=post-info-more><section class=post-tags><i class="fas fa-tags fa-fw" aria-hidden=true></i>&nbsp;<a href=/tags/linux/>linux</a>,&nbsp;<a href=/tags/performance/>performance</a></section><section><span><a href=javascript:void(0); onclick=window.history.back()>返回</a></span>&nbsp;|&nbsp;<span><a href=/>主頁</a></span></section></div><div class=post-nav><a href=/2024/07/20240731-suggestions_to_enhance_your_ansible_skills/ class=prev rel=prev title="提升你的 Ansible 技能的幾個建議"><i class="fas fa-angle-left fa-fw" aria-hidden=true></i>提升你的 Ansible 技能的幾個建議</a>
<a href=/2024/09/20240904-how-to-improve-programming-skills/ class=next rel=next title=如何提升寫程式的能力>如何提升寫程式的能力<i class="fas fa-angle-right fa-fw" aria-hidden=true></i></a></div></div><div id=comments><div id=disqus_thread class=comment></div><noscript>Please enable JavaScript to view the comments powered by <a href=https://disqus.com/?ref_noscript>Disqus</a>.</noscript></div></article></div></main><footer class=footer><div class=footer-container><div class=footer-line>由 <a href=https://gohugo.io/ target=_blank rel="noopener noreffer" title="Hugo 0.123.3">Hugo</a> 強力驅動 | 主題 - <a href=https://github.com/dillonzq/LoveIt target=_blank rel="noopener noreffer" title="LoveIt 0.2.11"><i class="far fa-kiss-wink-heart fa-fw" aria-hidden=true></i> LoveIt</a></div><div class=footer-line itemscope itemtype=http://schema.org/CreativeWork><i class="far fa-copyright fa-fw" aria-hidden=true></i><span itemprop=copyrightYear>2022 - 2024</span><span class=author itemprop=copyrightHolder>&nbsp;<a href=/ target=_blank>Divazone King</a></span>&nbsp;|&nbsp;<span class=license>All Rights Reserved</span></div></div></footer></div><div id=fixed-buttons><a href=# id=back-to-top class=fixed-button title=回到頂部><i class="fas fa-arrow-up fa-fw" aria-hidden=true></i>
</a><a href=# id=view-comments class=fixed-button title=查看評論><i class="fas fa-comment fa-fw" aria-hidden=true></i></a></div><script type=text/javascript src=https://divazone-tw.disqus.com/embed.js defer></script><script type=text/javascript src=https://cdn.jsdelivr.net/npm/autocomplete.js@0.38.1/dist/autocomplete.min.js></script><script type=text/javascript src=https://cdn.jsdelivr.net/npm/algoliasearch@4.13.1/dist/algoliasearch-lite.umd.min.js></script><script type=text/javascript src=https://cdn.jsdelivr.net/npm/lazysizes@5.3.2/lazysizes.min.js></script><script type=text/javascript src=https://cdn.jsdelivr.net/npm/clipboard@2.0.11/dist/clipboard.min.js></script><script type=text/javascript src=https://cdn.jsdelivr.net/npm/sharer.js@0.5.1/sharer.min.js></script><script type=text/javascript>window.config={code:{copyTitle:"複製到剪貼板",maxShownLines:50},comment:{},search:{algoliaAppID:"BR8J22JKVH",algoliaIndex:"blog.divazone",algoliaSearchKey:"4d018756130ab82ac57f3cd9c585ea19",highlightTag:"em",maxResultLength:10,noResultsFound:"沒有找到結果",snippetLength:30,type:"algolia"}}</script><script type=text/javascript src=/js/theme.min.js></script><script type=text/javascript>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-4BPYV5FEFR",{anonymize_ip:!0})</script><script type=text/javascript src="https://www.googletagmanager.com/gtag/js?id=G-4BPYV5FEFR" async></script></body></html>